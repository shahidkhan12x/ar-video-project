<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marker Video</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #info { position: absolute; top: 10px; left: 10px; color: white; z-index: 1000; }
    </style>
</head>
<body>
    <div id="info">Point your camera at the marker!</div>

    <!-- Video for Marker -->
    <video id="video1" autoplay loop muted style="display:none;" preload="auto">
        <source src="video1.mp4" type="video/mp4"> <!-- Replace with your video path -->
        Your browser does not support the video tag.
    </video>

    <a-scene embedded arjs="sourceType: webcam;">
        <!-- Marker 1 -->
        <a-marker type='pattern' url='marker1.patt'> <!-- Change to your marker's .patt file -->
            <a-plane id="videoPlane1" position="0 0 0" rotation="-90 0 0" 
                     width="1" height="1"
                     material="src: #video1; transparent: true; repeat: 1 1;" visible="false">
            </a-plane>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Utility function to detect mobile devices
        function isMobile() {
            return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
        }

        // Function to adjust plane size and position based on device
        function adjustPlaneSizeAndPosition(plane) {
            if (isMobile()) {
                // On mobile, adjust the video plane closer to the marker
                plane.setAttribute('position', '0 0.01 0'); // Place the video very close to the marker
                plane.setAttribute('width', '0.8'); // Adjust width based on mobile display
                plane.setAttribute('height', '0.8');
            } else {
                // On desktop, keep default size
                plane.setAttribute('position', '0 0.001 0');
                plane.setAttribute('width', '1');
                plane.setAttribute('height', '1');
            }
        }

        // Marker 1
        const video1 = document.getElementById('video1');
        const videoPlane1 = document.getElementById('videoPlane1');
        const marker1 = document.querySelector('a-marker[url="marker1.patt"]');

        // Adjust the size and position of the video plane on page load
        adjustPlaneSizeAndPosition(videoPlane1);

        marker1.addEventListener('markerFound', () => {
            video1.play();
            videoPlane1.setAttribute('visible', true); // Show video plane 1
        });

        marker1.addEventListener('markerLost', () => {
            video1.pause();
            video1.currentTime = 0; // Reset video 1
            videoPlane1.setAttribute('visible', false); // Hide video plane 1
        });
    </script>
</body>
</html>
