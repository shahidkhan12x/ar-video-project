<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marker Video</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #info { position: absolute; top: 10px; left: 10px; color: white; z-index: 1000; }
    </style>
</head>
<body>
    <div id="info">Point your camera at the marker!</div>

    <!-- Video for Marker -->
    <video id="video1" autoplay loop muted style="display:none;" preload="auto">
        <source src="video1.mp4" type="video/mp4"> <!-- Replace with your video path -->
        Your browser does not support the video tag.
    </video>

    <a-scene embedded arjs="sourceType: webcam;">
        <!-- Marker 1 -->
        <a-marker type='pattern' url='marker1.patt'> <!-- Change to your marker's .patt file -->
            <a-plane id="videoPlane1" rotation="-90 0 0" material="src: #video1; transparent: true;" visible="false">
            </a-plane>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>

    <script>
        // Utility function to detect mobile devices
        function isMobile() {
            return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
        }

        // Marker 1 elements
        const video1 = document.getElementById('video1');
        const videoPlane1 = document.getElementById('videoPlane1');
        const marker1 = document.querySelector('a-marker[url="marker1.patt"]');

        // Function to set custom position and size
        function setCustomSizeAndPosition(plane, options) {
            // Set plane size
            plane.setAttribute('width', options.width);
            plane.setAttribute('height', options.height);

            // Set plane position (closer or farther from the marker)
            plane.setAttribute('position', `${options.x} ${options.y} ${options.z}`);
        }

        // Marker found event
        marker1.addEventListener('markerFound', () => {
            video1.play();
            videoPlane1.setAttribute('visible', true); // Show video plane 1

            // Set custom size and position based on the device
            if (isMobile()) {
                // Customize these values for mobile view
                setCustomSizeAndPosition(videoPlane1, {
                    width: 1.5, // Adjust this value to control the size of the video plane
                    height: 1,  // Adjust this value to control the height of the video plane
                    x: 0,       // Horizontal position of the plane relative to the marker
                    y: 0.02,    // Height of the plane above the marker (increase if too close)
                    z: 0        // Depth of the plane in front of the marker (increase to push farther away)
                });
            } else {
                // Customize these values for desktop/laptop view
                setCustomSizeAndPosition(videoPlane1, {
                    width: 1,   // Desktop size of the video plane
                    height: 1,  // Desktop height of the video plane
                    x: 0,       // Horizontal position of the plane
                    y: 0.01,    // Height of the plane above the marker
                    z: 0        // Depth in front of the marker
                });
            }
        });

        // Marker lost event
        marker1.addEventListener('markerLost', () => {
            video1.pause();
            video1.currentTime = 0; // Reset video 1
            videoPlane1.setAttribute('visible', false); // Hide video plane 1
        });
    </script>
</body>
</html>
